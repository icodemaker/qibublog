(function(g){var a=g.Chart,w=g.addEvent,c=g.removeEvent,l=g.createElement,m=g.discardElement,z=g.css,q=g.merge,v=g.each,s=g.extend,d=Math.max,i=document,b=window,e=g.isTouchDevice,h=g.Renderer.prototype.symbols,G=g.getOptions(),H;s(G.lang,{printChart:"Print chart",downloadPNG:"Download PNG image",downloadJPEG:"Download JPEG image",downloadPDF:"Download PDF document",downloadSVG:"Download SVG vector image",contextButtonTitle:"Chart context menu"});G.navigation={menuStyle:{border:"1px solid #A0A0A0",background:"#FFFFFF",padding:"5px 0"},menuItemStyle:{padding:"0 10px",background:"none",color:"#303030",fontSize:e?"14px":"11px"},menuItemHoverStyle:{background:"#4572A5",color:"#FFFFFF"},buttonOptions:{symbolFill:"#E0E0E0",symbolSize:14,symbolStroke:"#666",symbolStrokeWidth:3,symbolX:12.5,symbolY:10.5,align:"right",buttonSpacing:3,height:22,theme:{fill:"white",stroke:"none"},verticalAlign:"top",width:24}};G.exporting={type:"image/png",url:"http://export.highcharts.com/",buttons:{contextButton:{menuClassName:"highcharts-contextmenu",symbol:"menu",_titleKey:"contextButtonTitle",menuItems:[{textKey:"printChart",onclick:function(){this.print()}},{separator:!0},{textKey:"downloadPNG",onclick:function(){this.exportChart()}},{textKey:"downloadJPEG",onclick:function(){this.exportChart({type:"image/jpeg"})}},{textKey:"downloadPDF",onclick:function(){this.exportChart({type:"application/pdf"})}},{textKey:"downloadSVG",onclick:function(){this.exportChart({type:"image/svg+xml"})}}]}}};g.post=function(k,f){var n,j;j=l("form",{method:"post",action:k,enctype:"multipart/form-data"},{display:"none"},i.body);for(n in f){l("input",{type:"hidden",name:n,value:f[n]},null,j)}j.submit();m(j)};s(a.prototype,{getSVG:function(k){var f=this,n,j,r,p,o=q(f.options,k);if(!i.createElementNS){i.createElementNS=function(t,u){return i.createElement(u)}}k=l("div",null,{position:"absolute",top:"-9999em",width:f.chartWidth+"px",height:f.chartHeight+"px"},i.body);j=f.renderTo.style.width;p=f.renderTo.style.height;j=o.exporting.sourceWidth||o.chart.width||/px$/.test(j)&&parseInt(j,10)||600;p=o.exporting.sourceHeight||o.chart.height||/px$/.test(p)&&parseInt(p,10)||400;s(o.chart,{animation:!1,renderTo:k,forExport:!0,width:j,height:p});o.exporting.enabled=!1;o.series=[];v(f.series,function(t){r=q(t.options,{animation:!1,showCheckbox:!1,visible:t.visible});r.isInternal||o.series.push(r)});n=new g.Chart(o,f.callback);v(["xAxis","yAxis"],function(t){v(f[t],function(u,x){var A=n[t][x],y=u.getExtremes(),B=y.userMin,y=y.userMax;A&&(B!==void 0||y!==void 0)&&A.setExtremes(B,y,!0,!1)})});j=n.container.innerHTML;o=null;n.destroy();m(k);j=j.replace(/zIndex="[^"]+"/g,"").replace(/isShadow="[^"]+"/g,"").replace(/symbolName="[^"]+"/g,"").replace(/jQuery[0-9]+="[^"]+"/g,"").replace(/url\([^#]+#/g,"url(#").replace(/<svg /,'<svg xmlns:xlink="http://www.w3.org/1999/xlink" ').replace(/ href=/g," xlink:href=").replace(/\n/," ").replace(/<\/svg>.*?$/,"</svg>").replace(/&nbsp;/g," ").replace(/&shy;/g,"­").replace(/<IMG /g,"<image ").replace(/height=([^" ]+)/g,'height="$1"').replace(/width=([^" ]+)/g,'width="$1"').replace(/hc-svg-href="([^"]+)">/g,'xlink:href="$1"/>').replace(/id=([^" >]+)/g,'id="$1"').replace(/class=([^" >]+)/g,'class="$1"').replace(/ transform /g," ").replace(/:(path|rect)/g,"$1").replace(/style="([^"]+)"/g,function(t){return t.toLowerCase()});return j=j.replace(/(url\(#highcharts-[0-9]+)&quot;/g,"$1").replace(/&quot;/g,"'")},exportChart:function(j,f){var j=j||{},k=this.options.exporting,k=this.getSVG(q({chart:{borderRadius:0}},k.chartOptions,f,{exporting:{sourceWidth:j.sourceWidth||k.sourceWidth,sourceHeight:j.sourceHeight||k.sourceHeight}})),j=q(this.options.exporting,j);g.post(j.url,{filename:j.filename||"chart",type:j.type,width:j.width||0,scale:j.scale||2,svg:k})},print:function(){var n=this,j=n.container,o=[],k=j.parentNode,p=i.body,r=p.childNodes;if(!n.isPrinting){n.isPrinting=!0,v(r,function(f,t){if(f.nodeType===1){o[t]=f.style.display,f.style.display="none"}}),p.appendChild(j),b.focus(),b.print(),setTimeout(function(){k.appendChild(j);v(r,function(f,t){if(f.nodeType===1){f.style.display=o[t]}});n.isPrinting=!1},1000)}},contextMenu:function(r,k,t,p,x,A,y){var u=this,C=u.options.navigation,J=C.menuItemStyle,D=u.chartWidth,E=u.chartHeight,I="cache-"+r,B=u[I],K=d(x,A),L,M,F;if(!B){u[I]=B=l("div",{className:r},{position:"absolute",zIndex:1000,padding:K+"px"},u.container),L=l("div",null,s({MozBoxShadow:"3px 3px 10px #888",WebkitBoxShadow:"3px 3px 10px #888",boxShadow:"3px 3px 10px #888"},C.menuStyle),B),M=function(){z(B,{display:"none"});y&&y.setState(0);u.openMenu=!1},w(B,"mouseleave",function(){F=setTimeout(M,500)}),w(B,"mouseenter",function(){clearTimeout(F)}),w(document,"mousedown",function(f){u.pointer.inClass(f.target,r)||M()}),v(k,function(f){if(f){var j=f.separator?l("hr",null,null,L):l("div",{onmouseover:function(){z(this,C.menuItemHoverStyle)},onmouseout:function(){z(this,J)},onclick:function(){M();f.onclick.apply(u,arguments)},innerHTML:f.text||u.options.lang[f.textKey]},s({cursor:"pointer"},J),L);u.exportDivElements.push(j)}}),u.exportDivElements.push(L,B),u.exportMenuWidth=B.offsetWidth,u.exportMenuHeight=B.offsetHeight}k={display:"block"};t+u.exportMenuWidth>D?k.right=D-t-x-K+"px":k.left=t-K+"px";p+A+u.exportMenuHeight>E&&y.alignOptions.verticalAlign!=="top"?k.bottom=E-p-K+"px":k.top=p+A-K+"px";z(B,k);u.openMenu=!0},addButton:function(p){var f=this,r=f.renderer,o=q(f.options.navigation.buttonOptions,p),A=o.onclick,x=o.menuItems,u,t,B={stroke:o.symbolStroke,fill:o.symbolFill},F=o.symbolSize||12;if(!f.btnCount){f.btnCount=0}if(!f.exportDivElements){f.exportDivElements=[],f.exportSVGElements=[]}if(o.enabled!==!1){var C=o.theme,D=C.states,E=D&&D.hover,D=D&&D.select,y;delete C.states;A?y=function(){A.apply(f,arguments)}:x&&(y=function(){f.contextMenu(t.menuClassName,x,t.translateX,t.translateY,t.width,t.height,t);t.setState(2)});o.text&&o.symbol?C.paddingLeft=g.pick(C.paddingLeft,25):o.text||s(C,{width:o.width,height:o.height,padding:0});t=r.button(o.text,0,0,y,C,E,D).attr({title:f.options.lang[o._titleKey],"stroke-linecap":"round"});t.menuClassName=p.menuClassName||"highcharts-menu-"+f.btnCount++;o.symbol&&(u=r.symbol(o.symbol,o.symbolX-F/2,o.symbolY-F/2,F,F).attr(s(B,{"stroke-width":o.symbolStrokeWidth||1,zIndex:1})).add(t));t.add().align(s(o,{width:t.width,x:g.pick(o.x,H)}),!0,"spacingBox");H+=(t.width+o.buttonSpacing)*(o.align==="right"?-1:1);f.exportSVGElements.push(t,u)}},destroyExport:function(j){var j=j.target,f,k;for(f=0;f<j.exportSVGElements.length;f++){if(k=j.exportSVGElements[f]){k.onclick=k.ontouchstart=null,j.exportSVGElements[f]=k.destroy()}}for(f=0;f<j.exportDivElements.length;f++){k=j.exportDivElements[f],c(k,"mouseleave"),j.exportDivElements[f]=k.onmouseout=k.onmouseover=k.ontouchstart=k.onclick=null,m(k)}}});h.menu=function(k,f,n,j){return["M",k,f+2.5,"L",k+n,f+2.5,"M",k,f+j/2+0.5,"L",k+n,f+j/2+0.5,"M",k,f+j-1.5,"L",k+n,f+j-1.5]};a.prototype.callbacks.push(function(k){var f,n=k.options.exporting,j=n.buttons;H=0;if(n.enabled!==!1){for(f in j){k.addButton(j[f])}w(k,"destroy",k.destroyExport)}})})(Highcharts);