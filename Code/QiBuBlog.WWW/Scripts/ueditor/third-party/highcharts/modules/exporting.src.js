(function(n){var d=n.Chart,b=n.addEvent,x=n.removeEvent,e=n.createElement,h=n.discardElement,f=n.css,t=n.merge,k=n.each,l=n.extend,r=Math,s=r.max,j=document,A=window,o=n.isTouchDevice,q="M",p="L",i="div",m="hidden",u="none",v="highcharts-",a="absolute",w="px",z,y=n.Renderer.prototype.symbols,g=n.getOptions(),c;l(g.lang,{printChart:"Print chart",downloadPNG:"Download PNG image",downloadJPEG:"Download JPEG image",downloadPDF:"Download PDF document",downloadSVG:"Download SVG vector image",contextButtonTitle:"Chart context menu"});g.navigation={menuStyle:{border:"1px solid #A0A0A0",background:"#FFFFFF",padding:"5px 0"},menuItemStyle:{padding:"0 10px",background:u,color:"#303030",fontSize:o?"14px":"11px"},menuItemHoverStyle:{background:"#4572A5",color:"#FFFFFF"},buttonOptions:{symbolFill:"#E0E0E0",symbolSize:14,symbolStroke:"#666",symbolStrokeWidth:3,symbolX:12.5,symbolY:10.5,align:"right",buttonSpacing:3,height:22,theme:{fill:"white",stroke:"none"},verticalAlign:"top",width:24}};g.exporting={type:"image/png",url:"http://export.highcharts.com/",buttons:{contextButton:{menuClassName:v+"contextmenu",symbol:"menu",_titleKey:"contextButtonTitle",menuItems:[{textKey:"printChart",onclick:function(){this.print()}},{separator:true},{textKey:"downloadPNG",onclick:function(){this.exportChart()}},{textKey:"downloadJPEG",onclick:function(){this.exportChart({type:"image/jpeg"})}},{textKey:"downloadPDF",onclick:function(){this.exportChart({type:"application/pdf"})}},{textKey:"downloadSVG",onclick:function(){this.exportChart({type:"image/svg+xml"})}}]}}};n.post=function(E,B){var D,C;C=e("form",{method:"post",action:E,enctype:"multipart/form-data"},{display:u},j.body);for(D in B){e("input",{type:m,name:D,value:B[D]},null,C)}C.submit();h(C)};l(d.prototype,{getSVG:function(B){var C=this,D,H,L,I,K,J,F,E,G=t(C.options,B);if(!j.createElementNS){j.createElementNS=function(M,N){return j.createElement(N)}}H=e(i,null,{position:a,top:"-9999em",width:C.chartWidth+w,height:C.chartHeight+w},j.body);F=C.renderTo.style.width;E=C.renderTo.style.height;K=G.exporting.sourceWidth||G.chart.width||(/px$/.test(F)&&parseInt(F,10))||600;J=G.exporting.sourceHeight||G.chart.height||(/px$/.test(E)&&parseInt(E,10))||400;l(G.chart,{animation:false,renderTo:H,forExport:true,width:K,height:J});G.exporting.enabled=false;G.series=[];k(C.series,function(M){I=t(M.options,{animation:false,showCheckbox:false,visible:M.visible});if(!I.isInternal){G.series.push(I)}});D=new n.Chart(G,C.callback);k(["xAxis","yAxis"],function(M){k(C[M],function(N,Q){var O=D[M][Q],P=N.getExtremes(),S=P.userMin,R=P.userMax;if(O&&(S!==z||R!==z)){O.setExtremes(S,R,true,false)}})});L=D.container.innerHTML;G=null;D.destroy();h(H);L=L.replace(/zIndex="[^"]+"/g,"").replace(/isShadow="[^"]+"/g,"").replace(/symbolName="[^"]+"/g,"").replace(/jQuery[0-9]+="[^"]+"/g,"").replace(/url\([^#]+#/g,"url(#").replace(/<svg /,'<svg xmlns:xlink="http://www.w3.org/1999/xlink" ').replace(/ href=/g," xlink:href=").replace(/\n/," ").replace(/<\/svg>.*?$/,"</svg>").replace(/&nbsp;/g,"\u00A0").replace(/&shy;/g,"\u00AD").replace(/<IMG /g,"<image ").replace(/height=([^" ]+)/g,'height="$1"').replace(/width=([^" ]+)/g,'width="$1"').replace(/hc-svg-href="([^"]+)">/g,'xlink:href="$1"/>').replace(/id=([^" >]+)/g,'id="$1"').replace(/class=([^" >]+)/g,'class="$1"').replace(/ transform /g," ").replace(/:(path|rect)/g,"$1").replace(/style="([^"]+)"/g,function(M){return M.toLowerCase()});L=L.replace(/(url\(#highcharts-[0-9]+)&quot;/g,"$1").replace(/&quot;/g,"'");return L},exportChart:function(E,D){E=E||{};var B=this,C=B.options.exporting,F=B.getSVG(t({chart:{borderRadius:0}},C.chartOptions,D,{exporting:{sourceWidth:E.sourceWidth||C.sourceWidth,sourceHeight:E.sourceHeight||C.sourceHeight}}));E=t(B.options.exporting,E);n.post(E.url,{filename:E.filename||"chart",type:E.type,width:E.width||0,scale:E.scale||2,svg:F})},print:function(){var C=this,E=C.container,F=[],G=E.parentNode,B=j.body,D=B.childNodes;if(C.isPrinting){return}C.isPrinting=true;k(D,function(I,H){if(I.nodeType===1){F[H]=I.style.display;I.style.display=u}});B.appendChild(E);A.focus();A.print();setTimeout(function(){G.appendChild(E);k(D,function(I,H){if(I.nodeType===1){I.style.display=F[H]}});C.isPrinting=false},1000)},contextMenu:function(H,M,T,U,S,I,C){var E=this,R=E.options.navigation,O=R.menuItemStyle,G=E.chartWidth,F=E.chartHeight,D="cache-"+H,N=E[D],P=s(S,I),B="3px 3px 10px #888",L,J,K,Q;if(!N){E[D]=N=e(i,{className:H},{position:a,zIndex:1000,padding:P+w},E.container);L=e(i,null,l({MozBoxShadow:B,WebkitBoxShadow:B,boxShadow:B},R.menuStyle),N);J=function(){f(N,{display:u});if(C){C.setState(0)}E.openMenu=false};b(N,"mouseleave",function(){K=setTimeout(J,500)});b(N,"mouseenter",function(){clearTimeout(K)});b(document,"mousedown",function(V){if(!E.pointer.inClass(V.target,H)){J()}});k(M,function(W){if(W){var V=W.separator?e("hr",null,null,L):e(i,{onmouseover:function(){f(this,R.menuItemHoverStyle)},onmouseout:function(){f(this,O)},onclick:function(){J();W.onclick.apply(E,arguments)},innerHTML:W.text||E.options.lang[W.textKey]},l({cursor:"pointer"},O),L);E.exportDivElements.push(V)}});E.exportDivElements.push(L,N);E.exportMenuWidth=N.offsetWidth;E.exportMenuHeight=N.offsetHeight}Q={display:"block"};if(T+E.exportMenuWidth>G){Q.right=(G-T-S-P)+w}else{Q.left=(T-P)+w}if(U+I+E.exportMenuHeight>F&&C.alignOptions.verticalAlign!=="top"){Q.bottom=(F-U-P)+w}else{Q.top=(U+I-P)+w}f(N,Q);E.openMenu=true},addButton:function(J){var F=this,K=F.renderer,C=t(F.options.navigation.buttonOptions,J),I=C.onclick,H=C.menuItems,N,D,O={stroke:C.symbolStroke,fill:C.symbolFill},P=C.symbolSize||12;if(!F.btnCount){F.btnCount=0}if(!F.exportDivElements){F.exportDivElements=[];F.exportSVGElements=[]}if(C.enabled===false){return}var B=C.theme,M=B.states,G=M&&M.hover,L=M&&M.select,E;delete B.states;if(I){E=function(){I.apply(F,arguments)}}else{if(H){E=function(){F.contextMenu(D.menuClassName,H,D.translateX,D.translateY,D.width,D.height,D);D.setState(2)}}}if(C.text&&C.symbol){B.paddingLeft=n.pick(B.paddingLeft,25)}else{if(!C.text){l(B,{width:C.width,height:C.height,padding:0})}}D=K.button(C.text,0,0,E,B,G,L).attr({title:F.options.lang[C._titleKey],"stroke-linecap":"round"});D.menuClassName=J.menuClassName||v+"menu-"+F.btnCount++;if(C.symbol){N=K.symbol(C.symbol,C.symbolX-(P/2),C.symbolY-(P/2),P,P).attr(l(O,{"stroke-width":C.symbolStrokeWidth||1,zIndex:1})).add(D)}D.add().align(l(C,{width:D.width,x:n.pick(C.x,c)}),true,"spacingBox");c+=(D.width+C.buttonSpacing)*(C.align==="right"?-1:1);F.exportSVGElements.push(D,N)},destroyExport:function(C){var B=C.target,E,D;for(E=0;E<B.exportSVGElements.length;E++){D=B.exportSVGElements[E];if(D){D.onclick=D.ontouchstart=null;B.exportSVGElements[E]=D.destroy()}}for(E=0;E<B.exportDivElements.length;E++){D=B.exportDivElements[E];x(D,"mouseleave");B.exportDivElements[E]=D.onmouseout=D.onmouseover=D.ontouchstart=D.onclick=null;h(D)}}});y.menu=function(E,F,D,C){var B=[q,E,F+2.5,p,E+D,F+2.5,q,E,F+C/2+0.5,p,E+D,F+C/2+0.5,q,E,F+C-1.5,p,E+D,F+C-1.5];return B};d.prototype.callbacks.push(function(C){var E,D=C.options.exporting,B=D.buttons;c=0;if(D.enabled!==false){for(E in B){C.addButton(B[E])}b(C,"destroy",C.destroyExport)}})}(Highcharts));