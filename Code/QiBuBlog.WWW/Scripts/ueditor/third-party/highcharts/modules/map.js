(function(c){function F(g,k,l){for(var n=4,p=[];n--;){p[n]=Math.round(k.rgba[n]+(g.rgba[n]-k.rgba[n])*(1-l))}return"rgba("+p.join(",")+")"}var j=c.Axis,G=c.Chart,m=c.Point,H=c.Pointer,e=c.each,D=c.extend,h=c.merge,f=c.pick,a=c.numberFormat,b=c.getOptions(),d=c.seriesTypes,i=b.plotOptions,o=c.wrap,C=c.Color,E=function(){};b.mapNavigation={buttonOptions:{align:"right",verticalAlign:"bottom",x:0,width:18,height:18,style:{fontSize:"15px",fontWeight:"bold",textAlign:"center"}},buttons:{zoomIn:{onclick:function(){this.mapZoom(0.5)},text:"+",y:-32},zoomOut:{onclick:function(){this.mapZoom(2)},text:"-",y:0}}};c.splitPath=function(g){var k,g=g.replace(/([A-Za-z])/g," $1 "),g=g.replace(/^\s*/,"").replace(/\s*$/,""),g=g.split(/[ ,]+/);for(k=0;k<g.length;k++){/[a-zA-Z]/.test(g[k])||(g[k]=parseFloat(g[k]))}return g};c.maps={};o(j.prototype,"getSeriesExtremes",function(g){var k=this.isXAxis,l,n,p=[];e(this.series,function(q,r){if(q.useMapGeometry){p[r]=q.xData,q.xData=[]}});g.call(this);l=f(this.dataMin,Number.MAX_VALUE);n=f(this.dataMax,Number.MIN_VALUE);e(this.series,function(q,r){if(q.useMapGeometry){l=Math.min(l,q[k?"minX":"minY"]),n=Math.max(n,q[k?"maxX":"maxY"]),q.xData=p[r]}});this.dataMin=l;this.dataMax=n});o(j.prototype,"setAxisTranslation",function(g){var k=this.chart,l=k.plotWidth/k.plotHeight,n=this.isXAxis,p=k.xAxis[0];g.call(this);if(k.options.chart.type==="map"&&!n&&p.transA!==void 0){this.transA=p.transA=Math.min(this.transA,p.transA),g=(p.max-p.min)/(this.max-this.min),p=g>l?this:p,l=(p.max-p.min)*p.transA,p.minPixelPadding=(p.len-l)/2}});o(G.prototype,"render",function(g){var k=this,l=k.options.mapNavigation;g.call(k);k.renderMapNavigation();l.zoomOnDoubleClick&&c.addEvent(k.container,"dblclick",function(n){k.pointer.onContainerDblClick(n)});l.zoomOnMouseWheel&&c.addEvent(k.container,document.onmousewheel===void 0?"DOMMouseScroll":"mousewheel",function(n){k.pointer.onContainerMouseWheel(n)})});D(H.prototype,{onContainerDblClick:function(g){var k=this.chart,g=this.normalize(g);k.isInsidePlot(g.chartX-k.plotLeft,g.chartY-k.plotTop)&&k.mapZoom(0.5,k.xAxis[0].toValue(g.chartX),k.yAxis[0].toValue(g.chartY))},onContainerMouseWheel:function(g){var k=this.chart,l,g=this.normalize(g);l=g.detail||-(g.wheelDelta/120);k.isInsidePlot(g.chartX-k.plotLeft,g.chartY-k.plotTop)&&k.mapZoom(l>0?2:0.5,k.xAxis[0].toValue(g.chartX),k.yAxis[0].toValue(g.chartY))}});o(H.prototype,"init",function(g,k,l){g.call(this,k,l);if(l.mapNavigation.enableTouchZoom){this.pinchX=this.pinchHor=this.pinchY=this.pinchVert=!0}});D(G.prototype,{renderMapNavigation:function(){var g=this,k=this.options.mapNavigation,l=k.buttons,n,p,q,r=function(){this.handler.call(g)};if(k.enableButtons){for(n in l){if(l.hasOwnProperty(n)){q=h(k.buttonOptions,l[n]),p=g.renderer.button(q.text,0,0,r).attr({width:q.width,height:q.height}).css(q.style).add(),p.handler=q.onclick,p.align(D(q,{width:p.width,height:p.height}),null,"spacingBox")}}}},fitToBox:function(g,k){e([["x","width"],["y","height"]],function(l){var n=l[0],l=l[1];g[n]+g[l]>k[n]+k[l]&&(g[l]>k[l]?(g[l]=k[l],g[n]=k[n]):g[n]=k[n]+k[l]-g[l]);g[l]>k[l]&&(g[l]=k[l]);g[n]<k[n]&&(g[n]=k[n])});return g},mapZoom:function(g,k,l){if(!this.isMapZooming){var n=this,p=n.xAxis[0],q=p.max-p.min,s=f(k,p.min+q/2),k=q*g,q=n.yAxis[0],r=q.max-q.min,l=f(l,q.min+r/2);g*=r;s-=k/2;r=l-g/2;l=f(n.options.chart.animation,!0);k=n.fitToBox({x:s,y:r,width:k,height:g},{x:p.dataMin,y:q.dataMin,width:p.dataMax-p.dataMin,height:q.dataMax-q.dataMin});p.setExtremes(k.x,k.x+k.width,!1);q.setExtremes(k.y,k.y+k.height,!1);if(p=l?l.duration||500:0){n.isMapZooming=!0,setTimeout(function(){n.isMapZooming=!1},p)}n.redraw()}}});i.map=h(i.scatter,{animation:!1,nullColor:"#F8F8F8",borderColor:"silver",borderWidth:1,marker:null,stickyTracking:!1,dataLabels:{verticalAlign:"middle"},turboThreshold:0,tooltip:{followPointer:!0,pointFormat:"{point.name}: {point.y}<br/>"},states:{normal:{animation:!0}}});j=c.extendClass(m,{applyOptions:function(g,k){var l=m.prototype.applyOptions.call(this,g,k);if(l.path&&typeof l.path==="string"){l.path=l.options.path=c.splitPath(l.path)}return l},onMouseOver:function(){clearTimeout(this.colorInterval);m.prototype.onMouseOver.call(this)},onMouseOut:function(){var g=this,k=+new Date,l=C(g.options.color),n=C(g.pointAttr.hover.fill),p=g.series.options.states.normal.animation,q=p&&(p.duration||500);if(q&&l.rgba.length===4&&n.rgba.length===4){delete g.pointAttr[""].fill,clearTimeout(g.colorInterval),g.colorInterval=setInterval(function(){var r=(new Date-k)/q,s=g.graphic;r>1&&(r=1);s&&s.attr("fill",F(n,l,r));r>=1&&clearTimeout(g.colorInterval)},13)}m.prototype.onMouseOut.call(g)}});d.map=c.extendClass(d.scatter,{type:"map",pointAttrToOptions:{stroke:"borderColor","stroke-width":"borderWidth",fill:"color"},colorKey:"y",pointClass:j,trackerGroups:["group","markerGroup","dataLabelsGroup"],getSymbol:E,supportsDrilldown:!0,getExtremesFromAll:!0,useMapGeometry:!0,init:function(g){var k=this,l=g.options.legend.valueDecimals,n=[],p,q,s,r,t,v,u;v=g.options.legend.layout==="horizontal";c.Series.prototype.init.apply(this,arguments);t=k.options.colorRange;if(r=k.options.valueRanges){e(r,function(w){q=w.from;s=w.to;p="";q===void 0?p="< ":s===void 0&&(p="> ");q!==void 0&&(p+=a(q,l));q!==void 0&&s!==void 0&&(p+=" - ");s!==void 0&&(p+=a(s,l));n.push(c.extend({chart:k.chart,name:p,options:{},drawLegendSymbol:d.area.prototype.drawLegendSymbol,visible:!0,setState:function(){},setVisible:function(){}},w))}),k.legendItems=n}else{if(t){q=t.from,s=t.to,r=t.fromLabel,t=t.toLabel,u=v?[0,0,1,0]:[0,1,0,0],v||(v=r,r=t,t=v),v={linearGradient:{x1:u[0],y1:u[1],x2:u[2],y2:u[3]},stops:[[0,q],[1,s]]},n=[{chart:k.chart,options:{},fromLabel:r,toLabel:t,color:v,drawLegendSymbol:this.drawLegendSymbolGradient,visible:!0,setState:function(){},setVisible:function(){}}],k.legendItems=n}}},drawLegendSymbol:d.area.prototype.drawLegendSymbol,drawLegendSymbolGradient:function(g,k){var l=g.options.symbolPadding,n=f(g.options.padding,8),p,q,s=this.chart.renderer.fontMetrics(g.options.itemStyle.fontSize).h,r=g.options.layout==="horizontal",t;t=f(g.options.rectangleLength,200);r?(p=-(l/2),q=0):(p=-t+g.baseline-l/2,q=n+s);k.fromText=this.chart.renderer.text(k.fromLabel,q,p).attr({zIndex:2}).add(k.legendGroup);q=k.fromText.getBBox();k.legendSymbol=this.chart.renderer.rect(r?q.x+q.width+l:q.x-s-l,q.y,r?t:s,r?s:t,2).attr({zIndex:1}).add(k.legendGroup);t=k.legendSymbol.getBBox();k.toText=this.chart.renderer.text(k.toLabel,t.x+t.width+l,r?p:t.y+t.height-l).attr({zIndex:2}).add(k.legendGroup);p=k.toText.getBBox();r?(g.offsetWidth=q.width+t.width+p.width+l*2+n,g.itemY=s+n):(g.offsetWidth=Math.max(q.width,p.width)+l+t.width+n,g.itemY=t.height+n,g.itemX=l)},getBox:function(g){var k=Number.MIN_VALUE,l=Number.MAX_VALUE,n=Number.MIN_VALUE,p=Number.MAX_VALUE;e(g||this.options.data,function(q){for(var t=q.path,s=t.length,u=!1,r=Number.MIN_VALUE,x=Number.MAX_VALUE,v=Number.MIN_VALUE,w=Number.MAX_VALUE;s--;){typeof t[s]==="number"&&!isNaN(t[s])&&(u?(r=Math.max(r,t[s]),x=Math.min(x,t[s])):(v=Math.max(v,t[s]),w=Math.min(w,t[s])),u=!u)}q._maxX=r;q._minX=x;q._maxY=v;q._minY=w;k=Math.max(k,r);l=Math.min(l,x);n=Math.max(n,v);p=Math.min(p,w)});this.minY=p;this.maxY=n;this.minX=l;this.maxX=k},translatePath:function(g){var k=!1,l=this.xAxis,n=this.yAxis,p,g=[].concat(g);for(p=g.length;p--;){typeof g[p]==="number"&&(g[p]=k?Math.round(l.translate(g[p])):Math.round(n.len-n.translate(g[p])),k=!k)}return g},setData:function(){c.Series.prototype.setData.apply(this,arguments);this.getBox()},translate:function(){var g=this,k=Number.MAX_VALUE,l=Number.MIN_VALUE;g.generatePoints();e(g.data,function(n){n.shapeType="path";n.shapeArgs={d:g.translatePath(n.path)};if(typeof n.y==="number"){if(n.y>l){l=n.y}else{if(n.y<k){k=n.y}}}});g.translateColors(k,l)},translateColors:function(g,k){var l=this.options,n=l.valueRanges,p=l.colorRange,q=this.colorKey,s,r;p&&(s=C(p.from),r=C(p.to));e(this.data,function(t){var u=t[q],w,v,x;if(n){for(x=n.length;x--;){if(w=n[x],s=w.from,r=w.to,(s===void 0||u>=s)&&(r===void 0||u<=r)){v=w.color;break}}}else{p&&u!==void 0&&(w=1-(k-u)/(k-g),v=u===null?l.nullColor:F(s,r,w))}if(v){t.color=null,t.options.color=v}})},drawGraph:E,drawDataLabels:E,drawPoints:function(){var g=this.xAxis,k=this.yAxis,l=this.colorKey;e(this.data,function(n){n.plotY=1;if(n[l]===null){n[l]=0,n.isNull=!0}});d.column.prototype.drawPoints.apply(this);e(this.data,function(n){var p=n.dataLabels,q=g.toPixels(n._minX,!0),r=g.toPixels(n._maxX,!0),s=k.toPixels(n._minY,!0),t=k.toPixels(n._maxY,!0);n.plotX=Math.round(q+(r-q)*f(p&&p.anchorX,0.5));n.plotY=Math.round(s+(t-s)*f(p&&p.anchorY,0.5));n.isNull&&(n[l]=null)});c.Series.prototype.drawDataLabels.call(this)},animateDrilldown:function(g){var k=this.chart.plotBox,l=this.chart.drilldownLevels[this.chart.drilldownLevels.length-1],n=l.bBox,p=this.chart.options.drilldown.animation;if(!g){g=Math.min(n.width/k.width,n.height/k.height),l.shapeArgs={scaleX:g,scaleY:g,translateX:n.x,translateY:n.y},e(this.points,function(q){q.graphic.attr(l.shapeArgs).animate({scaleX:1,scaleY:1,translateX:0,translateY:0},p)}),delete this.animate}},animateDrillupFrom:function(g){d.column.prototype.animateDrillupFrom.call(this,g)},animateDrillupTo:function(g){d.column.prototype.animateDrillupTo.call(this,g)}});i.mapline=h(i.map,{lineWidth:1,backgroundColor:"none"});d.mapline=c.extendClass(d.map,{type:"mapline",pointAttrToOptions:{stroke:"color","stroke-width":"lineWidth",fill:"backgroundColor"},drawLegendSymbol:d.line.prototype.drawLegendSymbol});i.mappoint=h(i.scatter,{dataLabels:{enabled:!0,format:"{point.name}",color:"black",style:{textShadow:"0 0 5px white"}}});d.mappoint=c.extendClass(d.scatter,{type:"mappoint"});c.Map=function(g,k){var l={endOnTick:!1,gridLineWidth:0,labels:{enabled:!1},lineWidth:0,minPadding:0,maxPadding:0,startOnTick:!1,tickWidth:0,title:null},n;n=g.series;g.series=null;g=h({chart:{type:"map",panning:"xy"},xAxis:l,yAxis:h(l,{reversed:!0})},g,{chart:{inverted:!1}});g.series=n;return new c.Chart(g,k)}})(Highcharts);