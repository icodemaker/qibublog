(function(e,c){function f(i){return typeof i==="number"}function g(i){return i!==d&&i!==null}var d,h,j,k=e.Chart,l=e.extend,q=e.each;j=["path","rect","circle"];h={top:0,left:0,center:0.5,middle:0.5,bottom:1,right:1};var o=c.inArray,a=e.merge,b=function(){this.init.apply(this,arguments)};b.prototype={init:function(i,p){var n=p.shape&&p.shape.type;this.chart=i;var m,r;r={xAxis:0,yAxis:0,title:{style:{},text:"",x:0,y:0},shape:{params:{stroke:"#000000",fill:"transparent",strokeWidth:2}}};m={circle:{params:{x:0,y:0}}};if(m[n]){r.shape=a(r.shape,m[n])}this.options=a({},r,p)},render:function(m){var r=this.chart,p=this.chart.renderer,n=this.group,t=this.title,s=this.shape,u=this.options,v=u.title,w=u.shape;if(!n){n=this.group=p.g()}if(!s&&w&&o(w.type,j)!==-1){s=this.shape=p[u.shape.type](w.params),s.add(n)}if(!t&&v){t=this.title=p.label(v),t.add(n)}n.add(r.annotations.group);this.linkObjects();m!==!1&&this.redraw()},redraw:function(){var i=this.options,p=this.chart,n=this.group,m=this.title,u=this.shape,t=this.linkedObject,A=p.xAxis[i.xAxis],I=p.yAxis[i.yAxis],D=i.width,J=i.height,K=h[i.anchorY],L=h[i.anchorX],B,E,z,F;if(t){B=t instanceof e.Point?"point":t instanceof e.Series?"series":null,B==="point"?(i.xValue=t.x,i.yValue=t.y,E=t.series):B==="series"&&(E=t),n.visibility!==E.group.visibility&&n.attr({visibility:E.group.visibility})}t=g(i.xValue)?A.toPixels(i.xValue+A.minPointOffset)-A.minPixelPadding:i.x;B=g(i.yValue)?I.toPixels(i.yValue):i.y;if(!isNaN(t)&&!isNaN(B)&&f(t)&&f(B)){m&&(m.attr(i.title),m.css(i.title.style));if(u){m=l({},i.shape.params);if(i.units==="values"){for(z in m){o(z,["width","x"])>-1?m[z]=A.translate(m[z]):o(z,["height","y"])>-1&&(m[z]=I.translate(m[z]))}m.width&&(m.width-=A.toPixels(0)-A.left);m.x&&(m.x+=A.minPixelPadding);if(i.shape.type==="path"){z=m.d;E=t;for(var G=B,H=z.length,C=0;C<H;){typeof z[C]==="number"&&typeof z[C+1]==="number"?(z[C]=A.toPixels(z[C])-E,z[C+1]=I.toPixels(z[C+1])-G,C+=2):C+=1}}}i.shape.type==="circle"&&(m.x+=m.r,m.y+=m.r);u.attr(m)}n.bBox=null;if(!f(D)){F=n.getBBox(),D=F.width}if(!f(J)){F||(F=n.getBBox()),J=F.height}if(!f(L)){L=h.center}if(!f(K)){K=h.center}t-=D*L;B-=J*K;p.animation&&g(n.translateX)&&g(n.translateY)?n.animate({translateX:t,translateY:B}):n.translate(t,B)}},destroy:function(){var i=this,n=this.chart.annotations.allItems,m=n.indexOf(i);m>-1&&n.splice(m,1);q(["title","shape","group"],function(p){i[p]&&(i[p].destroy(),i[p]=null)});i.group=i.title=i.shape=i.chart=i.options=null},update:function(i,m){l(this.options,i);this.linkObjects();this.render(m)},linkObjects:function(){var i=this.chart,p=this.linkedObject,n=p&&(p.id||p.options.id),m=this.options.linkedTo;if(g(m)){if(!g(p)||m!==n){this.linkedObject=i.get(m)}}else{this.linkedObject=null}}};l(k.prototype,{annotations:{add:function(i,p){var n=this.allItems,m=this.chart,s,r;Object.prototype.toString.call(i)==="[object Array]"||(i=[i]);for(r=i.length;r--;){s=new b(m,i[r]),n.push(s),s.render(p)}},redraw:function(){q(this.allItems,function(i){i.redraw()})}}});k.prototype.callbacks.push(function(i){var n=i.options.annotations,m;m=i.renderer.g("annotations");m.attr({zIndex:7});m.add();i.annotations.allItems=[];i.annotations.chart=i;i.annotations.group=m;Object.prototype.toString.call(n)==="[object Array]"&&n.length>0&&i.annotations.add(i.options.annotations);e.addEvent(i,"redraw",function(){i.annotations.redraw()})})})(Highcharts,HighchartsAdapter);