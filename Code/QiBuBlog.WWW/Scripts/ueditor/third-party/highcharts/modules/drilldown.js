(function(a){function y(g,e,h){return"rgba("+[Math.round(g[0]+(e[0]-g[0])*h),Math.round(g[1]+(e[1]-g[1])*h),Math.round(g[2]+(e[2]-g[2])*h),g[3]+(e[3]-g[3])*h].join(",")+")"}var u=function(){},f=a.getOptions(),b=a.each,v=a.extend,w=a.wrap,c=a.Chart,d=a.seriesTypes,s=d.pie,t=d.column,z=HighchartsAdapter.fireEvent;v(f.lang,{drillUpText:"◁ Back to {series.name}"});f.drilldown={activeAxisLabelStyle:{cursor:"pointer",color:"#039",fontWeight:"bold",textDecoration:"underline"},activeDataLabelStyle:{cursor:"pointer",color:"#039",fontWeight:"bold",textDecoration:"underline"},animation:{duration:500},drillUpButton:{position:{align:"right",x:-10,y:10}}};a.SVGRenderer.prototype.Element.prototype.fadeIn=function(){this.attr({opacity:0.1,visibility:"visible"}).animate({opacity:1},{duration:250})};c.prototype.drilldownLevels=[];c.prototype.addSeriesAsDrilldown=function(i,h){var j=i.series,k=j.xAxis,m=j.yAxis,l;l=i.color||j.color;var n,h=v({color:l},h);n=HighchartsAdapter.inArray(this,j.points);this.drilldownLevels.push({seriesOptions:j.userOptions,shapeArgs:i.shapeArgs,bBox:i.graphic.getBBox(),color:l,newSeries:h,pointOptions:j.options.data[n],pointIndex:n,oldExtremes:{xMin:k&&k.userMin,xMax:k&&k.userMax,yMin:m&&m.userMin,yMax:m&&m.userMax}});l=this.addSeries(h,!1);if(k){k.oldPos=k.pos,k.userMin=k.userMax=null,m.userMin=m.userMax=null}if(j.type===l.type){l.animate=l.animateDrilldown||u,l.options.animation=!0}j.remove(!1);this.redraw();this.showDrillUpButton()};c.prototype.getDrilldownBackText=function(){return this.options.lang.drillUpText.replace("{series.name}",this.drilldownLevels[this.drilldownLevels.length-1].seriesOptions.name)};c.prototype.showDrillUpButton=function(){var g=this,e=this.getDrilldownBackText(),h=g.options.drilldown.drillUpButton;this.drillUpButton?this.drillUpButton.attr({text:e}).align():this.drillUpButton=this.renderer.button(e,null,null,function(){g.drillUp()}).attr(v({align:h.position.align,zIndex:9},h.theme)).add().align(h.position,!1,h.relativeTo||"plotBox")};c.prototype.drillUp=function(){var g=this.drilldownLevels.pop(),e=this.series[0],h=g.oldExtremes,i=this.addSeries(g.seriesOptions,!1);z(this,"drillup",{seriesOptions:g.seriesOptions});if(i.type===e.type){i.drilldownLevel=g,i.animate=i.animateDrillupTo||u,i.options.animation=!0,e.animateDrillupFrom&&e.animateDrillupFrom(g)}e.remove(!1);i.xAxis&&(i.xAxis.setExtremes(h.xMin,h.xMax,!1),i.yAxis.setExtremes(h.yMin,h.yMax,!1));this.redraw();this.drilldownLevels.length===0?this.drillUpButton=this.drillUpButton.destroy():this.drillUpButton.attr({text:this.getDrilldownBackText()}).align()};s.prototype.animateDrilldown=function(g){var e=this.chart.drilldownLevels[this.chart.drilldownLevels.length-1],i=this.chart.options.drilldown.animation,j=e.shapeArgs,k=j.start,m=(j.end-k)/this.points.length,l=a.Color(e.color).rgba;g||b(this.points,function(h,n){var o=a.Color(h.color).rgba;h.graphic.attr(a.merge(j,{start:k+n*m,end:k+(n+1)*m})).animate(h.shapeArgs,a.merge(i,{step:function(p,q){q.prop==="start"&&this.attr({fill:y(l,o,q.pos)})}}))})};s.prototype.animateDrillupTo=t.prototype.animateDrillupTo=function(g){if(!g){var e=this,h=e.drilldownLevel;b(this.points,function(i){i.graphic.hide();i.dataLabel&&i.dataLabel.hide();i.connector&&i.connector.hide()});setTimeout(function(){b(e.points,function(i,j){var k=j===h.pointIndex?"show":"fadeIn";i.graphic[k]();if(i.dataLabel){i.dataLabel[k]()}if(i.connector){i.connector[k]()}})},Math.max(this.chart.options.drilldown.animation.duration-50,0));this.animate=u}};t.prototype.animateDrilldown=function(g){var e=this.chart.drilldownLevels[this.chart.drilldownLevels.length-1].shapeArgs,h=this.chart.options.drilldown.animation;g||(e.x+=this.xAxis.oldPos-this.xAxis.pos,b(this.points,function(i){i.graphic.attr(e).animate(i.shapeArgs,h)}))};t.prototype.animateDrillupFrom=s.prototype.animateDrillupFrom=function(g){var e=this.chart.options.drilldown.animation,h=this.group;delete this.group;b(this.points,function(i){var j=i.graphic,k=a.Color(i.color).rgba;delete i.graphic;j.animate(g.shapeArgs,a.merge(e,{step:function(l,m){m.prop==="start"&&this.attr({fill:y(k,a.Color(g.color).rgba,m.pos)})},complete:function(){j.destroy();h&&(h=h.destroy())}}))})};a.Point.prototype.doDrilldown=function(){for(var g=this.series.chart,e=g.options.drilldown,h=e.series.length,i;h--&&!i;){e.series[h].id===this.drilldown&&(i=e.series[h])}z(g,"drilldown",{point:this,seriesOptions:i});i&&g.addSeriesAsDrilldown(this,i)};w(a.Point.prototype,"init",function(g,e,h,i){var j=g.call(this,e,h,i),g=e.chart,e=(e=e.xAxis&&e.xAxis.ticks[i])&&e.label;if(j.drilldown){if(a.addEvent(j,"click",function(){j.doDrilldown()}),e){if(!e._basicStyle){e._basicStyle=e.element.getAttribute("style")}e.addClass("highcharts-drilldown-axis-label").css(g.options.drilldown.activeAxisLabelStyle).on("click",function(){j.doDrilldown&&j.doDrilldown()})}}else{e&&e._basicStyle&&e.element.setAttribute("style",e._basicStyle)}return j});w(a.Series.prototype,"drawDataLabels",function(g){var e=this.chart.options.drilldown.activeDataLabelStyle;g.call(this);b(this.points,function(h){if(h.drilldown&&h.dataLabel){h.dataLabel.attr({"class":"highcharts-drilldown-data-label"}).css(e).on("click",function(){h.doDrilldown()})}})});t.prototype.supportsDrilldown=!0;s.prototype.supportsDrilldown=!0;var x,f=function(e){e.call(this);b(this.points,function(g){g.drilldown&&g.graphic&&g.graphic.attr({"class":"highcharts-drilldown-point"}).css({cursor:"pointer"})})};for(x in d){d[x].prototype.supportsDrilldown&&w(d[x].prototype,"drawTracker",f)}})(Highcharts);