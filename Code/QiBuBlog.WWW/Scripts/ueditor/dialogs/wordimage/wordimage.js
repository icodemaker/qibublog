var wordImage={};var g=baidu.g,flashObj,flashContainer;wordImage.init=function(d,c){showLocalPath("localPath");createFlashUploader(d,c);addUploadListener();addOkListener()};function hideFlash(){flashObj=null;flashContainer.innerHTML=""}function addOkListener(){dialog.onok=function(){if(!imageUrls.length){return}var o=editor.getOpt("imageUrlPrefix"),j=domUtils.getElementsByTagName(editor.document,"img");editor.fireEvent("saveScene");for(var i=0,k;k=j[i++];){var m=k.getAttribute("word_img");if(!m){continue}for(var l=0,n;n=imageUrls[l++];){if(m.indexOf(n.original.replace(" ",""))!=-1){k.src=o+n.url;k.setAttribute("_src",o+n.url);k.setAttribute("title",n.title);domUtils.removeAttributes(k,["word_img","style","width","height"]);editor.fireEvent("selectionchange");break}}}editor.fireEvent("saveScene");hideFlash()};dialog.oncancel=function(){hideFlash()}}function addUploadListener(){g("upload").onclick=function(){flashObj.upload();this.style.display="none"}}function showLocalPath(i){var k=editor.selection.getRange().getClosedNode();var j=editor.execCommand("wordimage");if(j.length==1||k&&k.tagName=="IMG"){g(i).value=j[0];return}var m=j[0];var l=m.lastIndexOf("/")||0,n=m.lastIndexOf("\\")||0,o=l>n?"/":"\\";m=m.substring(0,m.lastIndexOf(o)+1);g(i).value=m}function createFlashUploader(j,f){var i=utils.extend({},lang.flashI18n);for(var h in i){if(!(h in {lang:1,uploadingTF:1,imageTF:1,textEncoding:1})&&i[h]){i[h]=encodeURIComponent(editor.options.langPath+editor.options.lang+"/images/"+i[h])}}j=utils.extend(j,i,false);var k={createOptions:{id:"flash",url:j.flashUrl,width:j.width,height:j.height,errorMessage:lang.flashError,wmode:browser.safari?"transparent":"window",ver:"10.0.0",vars:j,container:j.container}};k=extendProperty(f,k);flashObj=new baidu.flash.imageUploader(k);flashContainer=$G(j.container)}function extendProperty(d,f){for(var e in d){if(!f[e]){f[e]=d[e]}}return f}function getPasteData(b){baidu.g("msg").innerHTML=lang.copySuccess+"</br>";setTimeout(function(){baidu.g("msg").innerHTML=""},5000);return baidu.g(b).value}function createCopyButton(i,h){baidu.swf.create({id:"copyFlash",url:"fClipboard_ueditor.swf",width:"58",height:"25",errorMessage:"",bgColor:"#CBCBCB",wmode:"transparent",ver:"10.0.0",vars:{tid:h}},i);var e=baidu.swf.getMovie("copyFlash");var f=setInterval(function(){if(e&&e.flashInit){clearInterval(f);e.setHandCursor(true);e.setContentFuncName("getPasteData")}},500)}createCopyButton("clipboard","localPath");